@using System.Web
@{
    var za = new System.Globalization.CultureInfo("en-ZA");
    var prices = ViewBag.Prices as IDictionary<string, decimal?> ?? new Dictionary<string, decimal?>();
    int totalActive = ViewBag.TotalActive != null ? (int)ViewBag.TotalActive : 0;

    Func<string, IHtmlString> PriceFor = name =>
    {
        decimal? p;
        if (prices != null && prices.TryGetValue(name, out p) && p.HasValue)
        {
            // From R 12 345 / mo
            return new HtmlString("<div class='fc-price'>From R " + p.Value.ToString("N0", za) + "/mo</div>");
        }
        return new HtmlString("<div class='fc-price fc-price-missing'>Pricing on request</div>");
    };
}


<!-- HERO -->
<!-- HERO -->
<section class="fc-hero">
    <div class="fc-hero-inner">
        <div class="fc-hero-copy">
            <h1 class="fc-hero-title">Fountain Court</h1>

            <p class="fc-hero-sub">
                Smart, secure apartments in a walkable neighbourhood — flexible leases, fast maintenance,
                and modern finishes that feel like home from day one.
            </p>

            <ul class="fc-hero-points">
                <li><ion-icon name="checkmark-circle-outline" aria-hidden="true"></ion-icon> Digital applications & e-signing</li>
                <li><ion-icon name="checkmark-circle-outline" aria-hidden="true"></ion-icon> High-speed Wi-Fi & secure access</li>
                <li><ion-icon name="checkmark-circle-outline" aria-hidden="true"></ion-icon> On-site support, central location</li>
            </ul>

            <a class="fc-btn-primary fc-btn-with-arrow" href="@Url.Action("Apply","Applications")">
                Apply Now
                <svg class="icon-arrow" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                    <path d="M5 12h12m0 0-5-5m5 5-5 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </a>

            <div class="fc-hero-bullets">
                <span>Digital lease</span>
                <span>Modern units</span>
                <span>Central location</span>
            </div>
        </div>

        <!-- Right-side image with soft left fade (no border, compact) -->
        <div class="fc-hero-media fade-left"
             aria-label="Property preview image"
             style="background-image:url('https://fountaincourtstorage.blob.core.windows.net/images/Heroimage.jpg');">
            <!-- decorative overlay handled by CSS -->
        </div>
    </div>
</section>


<!-- PARALLAX / BRAND STRIP -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet" />
<section class="fc-parallax" aria-label="Fountain Court brand banner">
    <div class="fc-parallax-bg" aria-hidden="true"></div>
    <div class="fc-parallax-overlay">
        <h2 class="fc-parallax-text">Fountain Court</h2>
    </div>
</section>

<!-- CATALOGUE -->
<section class="fc-catalogue">
    <div class="fc-wrap">
        <div class="fc-section-head">
            <h2 class="fc-h2">Our Apartments</h2>
            <p class="fc-muted">Choose the layout that fits your life.</p>
        </div>

        <div class="fc-grid">
            <!-- CARD TEMPLATE EXAMPLE -->
            <article class="fc-card fc-card-immersive" data-name="Bachelor">
                <div class="fc-card-media carousel" data-autoplay="hover" aria-roledescription="carousel" aria-label="Bachelor images">
                    <!-- Images: replace with real blob URLs later -->
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/bachelor.jpg" alt="Bachelor interior 1" class="carousel-slide is-active" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/Bachelorkitch.jpg" alt="Bachelor interior 2" class="carousel-slide" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/bacheloLiving.jpg" alt="Bachelor kitchenette" class="carousel-slide" />

                    <button class="carousel-ctrl prev" aria-label="Previous image" type="button">&#10094;</button>
                    <button class="carousel-ctrl next" aria-label="Next image" type="button">&#10095;</button>
                </div>
                <div class="fc-card-body">
                    <h3 class="fc-card-title">Bachelor</h3>
                    @PriceFor("Bachelor")
                    <p class="fc-card-text">Compact efficiency with smart storage.</p>
                    <a href="@Url.Action("Apply","Applications")" class="fc-link">Apply for Bachelor →</a>
                </div>
            </article>

            <article class="fc-card fc-card-immersive" data-name="Studio">
                <div class="fc-card-media carousel" data-autoplay="hover" aria-roledescription="carousel" aria-label="Studio images">
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/Studio.jpg" alt="Studio interior 1" class="carousel-slide is-active" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/studioKitchen.jpg" alt="Studio interior 2" class="carousel-slide" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/StudioLiving.jpg" alt="Studio balcony" class="carousel-slide" />
                    <button class="carousel-ctrl prev" aria-label="Previous image" type="button">&#10094;</button>
                    <button class="carousel-ctrl next" aria-label="Next image" type="button">&#10095;</button>
                </div>
                <div class="fc-card-body">
                    <h3 class="fc-card-title">Studio</h3>
                    @PriceFor("Studio")
                    <p class="fc-card-text">Open-plan living, light and airy.</p>
                    <a href="@Url.Action("Apply","Applications")" class="fc-link">Apply for Studio →</a>
                </div>
            </article>

            <article class="fc-card fc-card-immersive" data-name="2 Bedroom">
                <div class="fc-card-media carousel" data-autoplay="hover" aria-roledescription="carousel" aria-label="Two bedroom images">
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/2bedroom.jpg" alt="Two bedroom living" class="carousel-slide is-active" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/2bedroomKit.jpg" alt="Two bedroom kitchen" class="carousel-slide" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/2BedroomLiving.jpg" alt="Two bedroom main" class="carousel-slide" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/2 bedroomBed.jpg" alt="Two bedroom bed" class="carousel-slide" />
                    <button class="carousel-ctrl prev" aria-label="Previous image" type="button">&#10094;</button>
                    <button class="carousel-ctrl next" aria-label="Next image" type="button">&#10095;</button>
                </div>
                <div class="fc-card-body">
                    <h3 class="fc-card-title">2 Bedroom</h3>
                    @PriceFor("2 Bedroom")
                    <p class="fc-card-text">Perfect for sharing or a dedicated workspace.</p>
                    <a href="@Url.Action("Apply","Applications")" class="fc-link">Apply for 2 Bedroom →</a>
                </div>
            </article>

            <article class="fc-card fc-card-immersive" data-name="3 Bedroom">
                <div class="fc-card-media carousel" data-autoplay="hover" aria-roledescription="carousel" aria-label="Three bedroom images">
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/3bedroom.jpg" alt="Three bedroom living" class="carousel-slide is-active" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/3bedroomKit.jpg" alt="Three bedroom kitchen" class="carousel-slide" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/3bedroomBed.jpg" alt="Three bedroom ensuite" class="carousel-slide" />
                    <button class="carousel-ctrl prev" aria-label="Previous image" type="button">&#10094;</button>
                    <button class="carousel-ctrl next" aria-label="Next image" type="button">&#10095;</button>
                </div>
                <div class="fc-card-body">
                    <h3 class="fc-card-title">3 Bedroom</h3>
                    @PriceFor("3 Bedroom")
                    <p class="fc-card-text">Room for family or flexible living.</p>
                    <a href="@Url.Action("Apply","Applications")" class="fc-link">Apply for 3 Bedroom →</a>
                </div>
            </article>

            <article class="fc-card fc-card-immersive" data-name="4 Bedroom">
                <div class="fc-card-media carousel" data-autoplay="hover" aria-roledescription="carousel" aria-label="Four bedroom images">
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/4bedroom.jpg" alt="Four bedroom living" class="carousel-slide is-active" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/4bedroomLiving.jpg" alt="Four bedroom dining" class="carousel-slide" />
                    <img src="https://fountaincourtstorage.blob.core.windows.net/images/4bedroomKit.jpg" alt="Four bedroom patio" class="carousel-slide" />
                    <button class="carousel-ctrl prev" aria-label="Previous image" type="button">&#10094;</button>
                    <button class="carousel-ctrl next" aria-label="Next image" type="button">&#10095;</button>
                </div>
                <div class="fc-card-body">
                    <h3 class="fc-card-title">4 Bedroom</h3>
                    @PriceFor("4 Bedroom")
                    <p class="fc-card-text">Spacious living for bigger households.</p>
                    <a href="@Url.Action("Apply","Applications")" class="fc-link">Apply for 4 Bedroom →</a>
                </div>
            </article>

            @if (totalActive > 5)
            {
                <article class="fc-card fc-card-immersive fc-card-more">
                    <div class="fc-card-body">
                        <h3 class="fc-card-title">…and many more!</h3>
                        <p class="fc-card-text">Explore additional layouts and availability.</p>
                        <a href="@Url.Action("Apply","Applications")" class="fc-link">See options →</a>
                    </div>
                </article>
            }

        </div>
    </div>
</section>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet" />
<style>
    /* ====== HERO (restored original styling) ====== */
    .fc-hero {
        padding: 56px 0;
        background: linear-gradient(180deg,#f7fbff 0%, #ffffff 100%);
    }

    .fc-hero-inner {
        max-width: 1140px;
        margin: 0 auto;
        padding: 0 24px;
        display: flex;
        align-items: center;
        gap: 32px;
        flex-wrap: wrap;
    }

    .fc-hero-copy {
        flex: 1 1 420px;
        min-width: 300px;
    }

    .fc-hero-title {
        font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        font-weight: 600;
        font-size: 40px;
        line-height: 1.15;
        color: #1f2a37;
        margin: 0 0 10px 0;
    }

    .fc-hero-sub {
        font-size: 16px;
        color: #4b5563;
        margin: 0 0 18px 0;
    }

    .fc-btn-primary {
        display: inline-block;
        background: #0f81c7;
        color: #fff;
        text-decoration: none;
        padding: 12px 22px;
        border-radius: 10px;
        font-weight: 600;
        transition: transform .12s ease, box-shadow .12s ease;
    }

        .fc-btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 18px rgba(15,129,199,.18);
        }

    .fc-hero-bullets {
        margin-top: 12px;
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        color: #6b7280;
        font-size: 13px;
    }

        .fc-hero-bullets span {
            background: #eef5fb;
            border: 1px solid #e4eef7;
            padding: 6px 10px;
            border-radius: 999px;
        }

    .fc-hero-media {
        flex: 1 1 420px;
        min-width: 300px;
        height: 280px;
        border-radius: 16px;
        background: linear-gradient(135deg,#e8f3ff,#f3f8ff);
        border: 1px solid #eaf0f6;
        animation: fcFadeIn .6s ease both .05s;
        box-shadow: 0 8px 22px rgba(15,129,199,.06);
        background-position: center;
        background-size: cover;
    }

    @@keyframes fcFadeIn {
        from {
            opacity: 0;
            transform: translateY(6px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* ====== (Keep your original styles) ====== */
    .fc-catalogue {
        padding: 36px 0 56px;
    }

    .fc-wrap {
        max-width: 1140px;
        margin: 0 auto;
        padding: 0 24px;
    }

    .fc-section-head {
        margin-bottom: 18px;
    }

    .fc-h2 {
        font-size: 24px;
        font-weight: 600;
        color: #1f2a37;
        margin: 0 0 4px;
        font-family: "Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }

    .fc-muted {
        color: #6b7280;
        margin: 0;
    }

    .fc-grid {
        display: grid;
        gap: 16px;
        grid-template-columns: repeat(12,1fr);
    }

    .fc-card {
        grid-column: span 12;
        background: #fff;
        border: 1px solid #eef2f7;
        border-radius: 14px;
        overflow: hidden;
        transition: transform .14s ease, box-shadow .14s ease;
        position: relative;
    }

        .fc-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(0,0,0,.06);
        }

    .fc-card-media {
        position: relative;
        height: 200px;
        background: #f6f8fb;
    }

    .fc-card-body {
        padding: 12px 14px 14px;
        position: relative;
        z-index: 1;
    }

    .fc-card-title {
        margin: 0 0 4px;
        font-size: 18px;
        font-weight: 600;
        color: #111827;
    }

    .fc-card-text {
        margin: 0 0 8px;
        color: #4b5563;
        font-size: 14px;
    }

    .fc-link {
        font-weight: 600;
        text-decoration: none;
        color: #0f81c7;
    }

        .fc-link:hover {
            text-decoration: underline;
        }

    /* ====== Immersive hover expansion & carousel ====== */
    .fc-card-immersive {
        will-change: transform;
    }

        .fc-card-immersive:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 18px 40px rgba(0,0,0,.12);
            z-index: 5;
        }

    .carousel {
        overflow: hidden;
        border-bottom: 1px solid #eef2f7;
    }

    .carousel-slide {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0;
        transition: opacity .35s ease;
    }

        .carousel-slide.is-active {
            opacity: 1;
        }

    .carousel-ctrl {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: rgba(255,255,255,.75);
        padding: 6px 10px;
        border-radius: 10px;
        font-size: 18px;
        line-height: 1;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,.12);
        z-index: 2;
    }

        .carousel-ctrl:hover {
            background: #fff;
        }

        .carousel-ctrl.prev {
            left: 10px;
        }

        .carousel-ctrl.next {
            right: 10px;
        }

    /* Make Apply link always clickable & visible even while media is animating */
    .fc-card-body .fc-link {
        position: relative;
        z-index: 2;
    }

    /* Responsive columns */
    @@media (min-width: 576px) {
        .fc-card {
            grid-column: span 6;
        }

        .fc-card-media {
            height: 220px;
        }
    }

    @@media (min-width: 992px) {
        .fc-card {
            grid-column: span 4;
        }

        .fc-card-media {
            height: 240px;
        }
    }

    /* Respect reduced motion */
    @@media (prefers-reduced-motion: reduce) {
        .fc-card-immersive:hover {
            transform: none;
        }

        .carousel-slide {
            transition: none;
        }
    }
    /* ===== Parallax (enhanced, non-destructive) ===== */
    .fc-parallax {
        position: relative;
        height: 10vh;
        min-height: 280px;
        margin: 28px 0 10px;
        overflow: hidden;
        isolation: isolate;
        border: 1px solid #eef2f7;
        border-radius: 20px;
        box-shadow: 0 14px 40px rgba(31,42,55,.08);
        background: linear-gradient(180deg,#f7fbff 0%,#ffffff 100%)
    }

        .fc-parallax::after {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(80% 60% at 50% 40%,rgba(255,255,255,.65) 0%,rgba(255,255,255,0) 70%);
            pointer-events: none
        }

    .fc-parallax-bg {
        position: absolute;
        inset: -12% -6%;
        background-image: radial-gradient(900px 360px at 12% 28%,#e9f5ff 0%,rgba(233,245,255,0) 60%),radial-gradient(800px 320px at 88% 72%,#f0fff6 0%,rgba(240,255,246,0) 60%),linear-gradient(180deg,#f7fbff 0%,#ffffff 100%),repeating-linear-gradient(120deg,rgba(15,129,199,.06) 0 2px,transparent 2px 8px);
        background-repeat: no-repeat;
        background-size: cover,cover,cover,auto;
        will-change: transform;
        transform: translate3d(0,0,0)
    }

    .fc-parallax-overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        padding: 12px
    }

    .fc-parallax-text {
        font-family: "Playfair Display",Georgia,"Times New Roman",serif;
        font-weight: 800;
        letter-spacing: .6px;
        line-height: .95;
        text-align: center;
        color: #1f2a37;
        font-size: clamp(34px,8vw,92px);
        padding: 12px 20px;
        border-radius: 18px;
        background: rgba(255,255,255,.55);
        border: 1px solid #eef2f7;
        box-shadow: 0 12px 28px rgba(31,42,55,.08);
        backdrop-filter: saturate(1.1) blur(2px);
        will-change: transform,opacity;
        transform: translate3d(0,0,0)
    }

    .fc-parallax-chip {
        position: absolute;
        bottom: 16px;
        right: 18px;
        background: rgba(15,129,199,.08);
        border: 1px solid rgba(15,129,199,.25);
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 12px;
        color: #0a6fab;
        pointer-events: none
    }

    @@media (max-width: 576px) {
        .fc-parallax {
            height: 38vh;
            min-height: 240px;
            border-radius: 16px
        }
    }

    @@media (prefers-reduced-motion: reduce) {
        .fc-parallax-bg, .fc-parallax-text {
            transition: none !important;
            transform: none !important
        }
    }


    /* --- HERO: soft image fade into text, compact media, arrow button --- */

    /* A bit more breathing room between columns on large screens */
    @@media (min-width: 992px) {
        .fc-hero-inner {
            gap: 40px;
        }
    }

    /* Stronger sales list under subheading */
    .fc-hero-points {
        list-style: none;
        padding: 0;
        margin: 10px 0 18px;
        display: grid;
        gap: 8px;
        color: #374151;
        font-size: 15px;
    }

        .fc-hero-points li {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fc-hero-points ion-icon {
            font-size: 18px;
            color: #0f81c7;
        }

    /* Make Apply button show an arrow that glides right on hover */
    .fc-btn-with-arrow {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        line-height: 1;
    }

        .fc-btn-with-arrow .icon-arrow {
            transition: transform .18s ease;
        }

        .fc-btn-with-arrow:hover .icon-arrow {
            transform: translateX(3px);
        }

    /* Compact, borderless hero media with soft fade on the left */
    .fc-hero-media {
        height: 260px; /* a bit smaller/compact */
        border: none !important; /* remove border */
        box-shadow: none !important; /* remove shadow */
        background-position: center;
        background-size: cover;
        position: relative;
        border-radius: 16px; /* keep gentle rounding */
        isolation: isolate;
    }

        /* Soft fade from image (right) into the text column (left) */
        .fc-hero-media.fade-left {
            /* mask creates a left-edge fade to transparent */
            -webkit-mask-image: linear-gradient(to left, #000 58%, rgba(0,0,0,0) 100%);
            mask-image: linear-gradient(to left, #000 58%, rgba(0,0,0,0) 100%);
        }

            /* A very subtle glossy overlay for depth (optional) */
            .fc-hero-media.fade-left::after {
                content: "";
                position: absolute;
                inset: 0;
                pointer-events: none;
                background: linear-gradient(180deg, rgba(255,255,255,.0), rgba(255,255,255,.06));
                border-radius: inherit;
            }

    /* Larger but still unboxed on wide screens */
    @@media (min-width: 992px) {
        .fc-hero-media {
            height: 320px;
        }
    }

    /* Entrance effect stays subtle */
    @@keyframes fcFadeIn {
        from {
            opacity: 0;
            transform: translateY(6px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Price line under titles */
    .fc-price {
        margin: 2px 0 6px;
        font-weight: 700;
        color: #1f2a37;
        letter-spacing: .2px;
    }

    .fc-price-missing {
        color: #6b7280;
        font-weight: 600;
    }

    /* “...and many more” card keeps same look, no media header */
    .fc-card-more .fc-card-body {
        padding: 18px 16px;
    }

</style>

<script>
    (function () {
        // Lightweight carousel controller per card
        const cards = document.querySelectorAll('.fc-card-immersive .carousel');
        const AUTOPLAY_INTERVAL = 2200; // ms

        cards.forEach((carousel) => {
            const slides = Array.from(carousel.querySelectorAll('.carousel-slide'));
            const prevBtn = carousel.querySelector('.carousel-ctrl.prev');
            const nextBtn = carousel.querySelector('.carousel-ctrl.next');
            let idx = 0, timer = null, pausedByControl = false, isHovering = false;

            function show(i) {
                slides.forEach((s, k) => s.classList.toggle('is-active', k === i));
                idx = i;
            }
            function next() { show((idx + 1) % slides.length); }
            function prev() { show((idx - 1 + slides.length) % slides.length); }

            function start() {
                if (timer || slides.length <= 1 || pausedByControl) return;
                timer = setInterval(next, AUTOPLAY_INTERVAL);
            }
            function stop() { if (timer) { clearInterval(timer); timer = null; } }

            // Hover-based autoplay (desktop), focus-based for keyboard users
            const root = carousel.closest('.fc-card-immersive');
            function onEnter() { isHovering = true; pausedByControl = false; start(); }
            function onLeave() { isHovering = false; stop(); }

            if (carousel.dataset.autoplay === 'hover') {
                root.addEventListener('mouseenter', onEnter);
                root.addEventListener('mouseleave', onLeave);
                root.addEventListener('focusin', start);
                root.addEventListener('focusout', stop);
            }

            // Controls pause autoplay until mouse leaves (or 5s fallback)
            function onControl(fn) {
                return (e) => {
                    e.preventDefault();
                    pausedByControl = true;
                    stop();
                    fn();
                    // Resume after 5s if still hovering and user hasn't interacted again
                    setTimeout(() => { if (isHovering && pausedByControl) { pausedByControl = false; start(); } }, 5000);
                };
            }

            if (prevBtn) prevBtn.addEventListener('click', onControl(prev));
            if (nextBtn) nextBtn.addEventListener('click', onControl(next));

            // Basic swipe support for touch users
            let touchX = null;
            carousel.addEventListener('touchstart', (e) => { touchX = e.changedTouches[0].clientX; stop(); }, { passive: true });
            carousel.addEventListener('touchend', (e) => {
                if (touchX == null) return;
                const dx = e.changedTouches[0].clientX - touchX;
                if (Math.abs(dx) > 30) { (dx > 0 ? prev : next)(); }
                touchX = null;
            }, { passive: true });

            // Initialize first slide visible (already set in markup) and pre-start if card is initially hovered (rare)
            show(0);
        });
    })();
</script>

<script>
    // Enhanced parallax motion (keeps other scripts intact)
    (function () {
        const section = document.querySelector('.fc-parallax');
        if (!section) return;
        const bg = section.querySelector('.fc-parallax-bg');
        const txt = section.querySelector('.fc-parallax-text');
        const chip = document.createElement('div');
        chip.className = 'fc-parallax-chip';
        chip.textContent = 'Modern living • Central location';
        section.appendChild(chip);

        const prefersReduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (prefersReduce) return;

        let ticking = false;
        function onScroll() { if (!ticking) { ticking = true; requestAnimationFrame(update); } }
        function update() {
            const rect = section.getBoundingClientRect();
            const vh = window.innerHeight || document.documentElement.clientHeight;
            const range = rect.height + vh;
            const progress = 1 - Math.min(Math.max(rect.bottom / range, 0), 1); // 0..1

            const bgY = progress * -40; // stronger background drift
            const txtY = progress * -14; // subtle text drift
            const scale = 1 + 0.05 * Math.sin(progress * Math.PI);

            bg.style.transform = 'translate3d(0,' + bgY + 'px,0)';
            txt.style.transform = 'translate3d(0,' + txtY + 'px,0) scale(' + scale.toFixed(3) + ')';
            ticking = false;
        }
        update();
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', onScroll);
    })();
</script>
